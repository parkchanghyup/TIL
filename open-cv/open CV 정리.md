# open CV ì •ë¦¬

## Digital Imageë€ ?

![Untitled](images/Untitled.png)

### Digital image ìœ í˜•

**Binary Image : pixelë‹¹ 1bitë¡œ í‘œí˜„í•˜ëŠ” ì˜ìƒ**

ì¦‰ í°ìƒ‰ê³¼ ê²€ì€ìƒ‰ìœ¼ë¡œ í‘œí˜„ë˜ëŠ” ì˜ìƒì´ë‹¤.

![Untitled](images/Untitled%201.png)

**Grayscale Image : Pixelë‹¹ 8bit, ì¦‰ 256 ë‹¨ê³„ì˜ ëª…ì•”(ë¹›ì˜ ì„¸ê¸°)ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ì´ë¯¸ì§€.**

![Untitled](images/Untitled%202.png)

**Color Image : Color ì´ë¯¸ì§€ëŠ” pixelì˜ ìƒ‰ì„ í‘œí˜„í•˜ê¸° ìœ„í•´ pixelë‹¹ 24bit ì‚¬ìš©** (ì´ 16,777,216ê°€ì§€ ìƒ‰ í‘œí˜„ê°€ëŠ¥)  

pixelì€ RGBê°ê°ì„ ìœ„í•´ì„œ 8bitë¥¼ ì‚¬ìš©í•œë‹¤. ë˜í•œ ê° pixelë‹¹ 3Byteë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ìš©ëŸ‰ì´ í¬ë‹¤. 

![Untitled](images/Untitled%203.png)

## ì´ë¯¸ì§€ ì½ê¸° / ì €ì¥

![Untitled](images/Untitled%204.png)

![Untitled](images/Untitled%205.png)

![Untitled](images/Untitled%206.png)

## ë„í˜• ê·¸ë¦¬ê¸°

![Untitled](images/Untitled%207.png)

## ê°œë³„ pixel ë‹¤ë£¨ê¸°

![Untitled](images/Untitled%208.png)

## ë”í•˜ê¸° ì—°ì‚°

ì´ë¯¸ì§€ë¥¼ ë”í•˜ê¸° ìœ„í•´ì„œëŠ” ì‚¬ì´ì¦ˆê°€ ê°™ì•„ì•¼ í•œë‹¤.

![Untitled](images/Untitled%209.png)

## ì´ë¯¸ì§€ ì„ê³„ì²˜ë¦¬

ì´ë¯¸ì§€ ì„ê³„ì²˜ë¦¬ë¥¼ í†µí•´ ì´ë¯¸ì§€ë¥¼ ì´ì§„í™” ì²˜ë¦¬ í•  ìˆ˜ ìˆë‹¤. 

ì„ê³„ì²˜ë¦¬ë€ ì„ê³„ê°’ë³´ë‹¤ í¬ë©´ ë°±, ì‘ìœ¼ë©´ í‘ì´ ëœë‹¤. ê¸°ë³¸ ì„ê³„ì²˜ë¦¬ëŠ” ì‚¬ìš©ìê°€ ê³ ì •ëœ ì„ê³„ê°’ì„ ê²°ì •í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ëŠ” ë‹¨ìˆœí•œ í˜•íƒœì´ë‹¤.  

![Untitled](images/Untitled%2010.png)

### typeë³„ thresholding ê²°ê³¼

![Untitled](images/Untitled%2011.png)

### Otsuì˜ ì´ì§„í™”

Otsuì˜ ì´ì§„í™”(Otsuâ€™s Binarization)ë€ bimodal imageì—ì„œ ì„ê³„ê°’ì„ ìë™ìœ¼ë¡œ ê³„ì‚°í•´ì£¼ëŠ” ê²ƒì„ ë§í•œë‹¤.

**bimodal image**Â (íˆìŠ¤í† ê·¸ë¨ìœ¼ë¡œ ë¶„ì„í•˜ë©´ 2ê°œì˜ peakê°€ ìˆëŠ” ì´ë¯¸ì§€)ì˜ ê²½ìš°ëŠ” íˆìŠ¤í† ê·¸ë¨ì—ì„œ ì„ê³„ê°’ì„ ì–´ëŠì •ë„ ì •í™•íˆ ê³„ì‚° í•  ìˆ˜ ìˆë‹¤.  

ì ìš© ë°©ë²•ì€ `cv2.threshold()`í•¨ìˆ˜ì˜ flagì— ì¶”ê°€ë¡œ `cv2.THRESH_STSU` ë¥¼ ì ìš©í•˜ë©´ ëœë‹¤. ì´ë•Œ ì„ê³„ê°’ì€ 0ìœ¼ë¡œ ì „ë‹¬í•˜ë©´ ëœë‹¤.

ì•„ë˜ ê²°ê³¼ê°’ì€ global thresholdê°’, Otsu thresholdingì ìš©, Gaussian blurë¥¼ í†µí•´ nosiseë¥¼ ì œê±°í•œ í›„ Otsu thresholdingì ìš© ê²°ê³¼ì´ë‹¤.

![Untitled](images/Untitled%2012.png)

## ì´ë¯¸ì§€ì˜ ê¸°í•˜í•™ì  ë³€í˜•

ì´ë¯¸ì§€ ë³€í˜•ì˜ ì˜ˆì‹œë¡œëŠ” ì‚¬ì´ì¦ˆ ë³€ê²½(Scaling), ìœ„ì¹˜ë³€ê²½(Translation), íšŒì „(Rotation) ë“±ì´ ìˆë‹¤. ë³€í™˜ì˜ ì¢…ë¥˜ì—ëŠ” ëª‡ê°€ì§€ ë¶„ë¥˜ê°€ ìˆë‹¤.

- ê°•ì²´ë³€í™˜(Ridid-Body) : í¬ê¸° ë° ê°ë„ê°€ ë³´ì¡´(ex; Translation, Rotation)
- ìœ ì‚¬ë³€í™˜(Similarity) : í¬ê¸°ëŠ” ë³€í•˜ê³  ê°ë„ëŠ” ë³´ì¡´(ex; Scaling)
- ì„ í˜•ë³€í™˜(Linear) : Vector ê³µê°„ì—ì„œì˜ ì´ë™. ì´ë™ë³€í™˜ì€ ì œì™¸.
- Affine : ì„ í˜•ë³€í™˜ê³¼ ì´ë™ë³€í™˜ê¹Œì§€ í¬í•¨. ì„ ì˜ ìˆ˜í‰ì„±ì€ ìœ ì§€.(ex;ì‚¬ê°í˜•->í‰í–‰ì‚¬ë³€í˜•)
- Perspective : Affineë³€í™˜ì— ìˆ˜í‰ì„±ë„ ìœ ì§€ë˜ì§€ ì•ŠìŒ. ì›ê·¼ë³€í™˜

### Scaling

Scalingì€ ì´ë¯¸ì§€ì˜ ì‚¬ì´ì¦ˆê°€ ë³€í•˜ëŠ” ê²ƒ ì´ë‹¤. OpenCV ì—ì„œëŠ” `cv2.resize()` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì ìš©í•  ìˆ˜ ìˆë‹¤.  ì‚¬ì´ì¦ˆê°€ ë³€í•˜ë©´ pixel ì‚¬ì´ì˜ ê°’ì„ ê²°ì • í•´ì•¼ í•˜ëŠ”ë°, ì´ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ë³´ê°„ë²•(Interpolation method)ì´ë¼ê³  í•œë‹¤. ë§ì´ ì‚¬ìš© ë˜ëŠ” ë³´ê°„ë²•ì€ ì‚¬ì´ì¦ˆë¥¼ ì¤„ì¼ë•ŒëŠ” `cv2.INTER_AREA`, ì‚¬ì´ì¦ˆë¥¼ í¬ê²Œ í•  ë•ŒëŠ” `cv2.INTER_CUBIC` , `cv2.INTER_LINEAR` ì„ ì‚¬ìš©í•œë‹¤.   

![Untitled](images/Untitled%2013.png)

![Untitled](images/Untitled%2014.png)

### Translation

ì´ë¯¸ì§€ì˜ ìœ„ì¹˜ë¥¼ ë³€ê²½í•˜ëŠ” ë³€í™˜

![Untitled](images/Untitled%2015.png)

![Untitled](images/Untitled%2016.png)

### Rotation

ë¬¼ì²´ë¥¼ í‰ë©´ìƒì˜ í•œ ì ì„ ì¤‘ì‹¬ìœ¼ë¡œ ğœƒ ë§Œí¼ íšŒì „í•˜ëŠ” ë³€í™˜ì´ë‹¤. ì–‘ì˜ ê°ë„ëŠ” ì‹œê³„ë°˜ëŒ€ë°©í–¥ìœ¼ë¡œ íšŒì „ì„ í•œë‹¤. ì—­ì‹œ ë³€í™˜ í–‰ë ¬ì´ í•„ìš”í•œë°, ë³€í™˜ í–‰ë ¬ì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ëŠ”Â `cv2.getRotationMatrix2D()`
Â í•¨ìˆ˜ì´ë‹¤.

![Untitled](images/Untitled%2017.png)

ì´ë¯¸ì§€ì˜ ì¤‘ì‹¬ì ì„ ê¸°ì¤€ìœ¼ë¡œ 90ë„ íšŒì „ í•˜ë©´ì„œ 0.5ë°° Scale

![Untitled](images/Untitled%2018.png)

### Affine Transformation

Affine Transformationì€ ì„ ì˜ í‰í–‰ì„±ì€ ìœ ì§€ê°€ ë˜ë©´ì„œ ì´ë¯¸ì§€ë¥¼ ë³€í™˜í•˜ëŠ” ì‘ì—…ì´ë‹¤. ì´ë™, í™•ëŒ€, Scale, ë°˜ì „ê¹Œì§€ í¬í•¨ëœ ë³€í™˜ì´ë‹¤. Affine ë³€í™˜ì„ ìœ„í•´ì„œëŠ” 3ê°œì˜ Matchê°€ ë˜ëŠ” ì ì´ ìˆìœ¼ë©´ ë³€í™˜í–‰ë ¬ì„ êµ¬í•  ìˆ˜ ìˆë‹¤.

ì´ë¯¸ì§€ì— ì›ì„ ê·¸ë¦¬ê³  Affine ë³€í™˜ í›„ ì´ë™ ì  í™•ì¸

![Untitled](images/Untitled%2019.png)

### ****Perspective Transformation****

Perspective(ì›ê·¼ë²•) ë³€í™˜ì€ ì§ì„ ì˜ ì„±ì§ˆë§Œ ìœ ì§€ê°€ ë˜ê³ , ì„ ì˜ í‰í–‰ì„±ì€ ìœ ì§€ê°€ ë˜ì§€ ì•ŠëŠ” ë³€í™˜ì´ë‹¤. ê¸°ì°¨ê¸¸ì€ ì„œë¡œ í‰í–‰í•˜ì§€ë§Œ ì›ê·¼ë³€í™˜ì„ ê±°ì¹˜ë©´ í‰í–‰ì„±ì€ ìœ ì§€ ë˜ì§€ ëª»í•˜ê³  í•˜ë‚˜ì˜ ì ì—ì„œ ë§Œë‚˜ëŠ” ê²ƒ ì²˜ëŸ¼ ë³´ì¸ë‹¤.(ë°˜ëŒ€ì˜ ë³€í™˜ë„ ê°€ëŠ¥)  

![Untitled](images/Untitled%2020.png)

## Image Smoothing

### Image Filtering

ì´ë¯¸ì§€ë„ ìŒì„± ì‹ í˜¸ì²˜ëŸ¼ ì£¼íŒŒìˆ˜ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ê³ ì£¼íŒŒëŠ” ë°ê¸°ì˜ ë³€í™”ê°€ ë§ì€ ê³³, ì¦‰ ê²½ê³„ì„  ì˜ì—­ì—ì„œ ë‚˜íƒ€ë‚˜ë©°, ì¼ë°˜ì ì¸ ë°°ê²½ì€ ì €ì£¼íŒŒë¡œ ë‚˜íƒ€ë‚œë‹¤. ì´ê²ƒì„ ë°”íƒ•ìœ¼ë¡œ ê³ ì£¼íŒŒë¥¼ ì œê±°í•˜ë©´ Blurì²˜ë¦¬ê°€ ë˜ë©°, ì €ì£¼íŒŒë¥¼ ì œê±°í•˜ë©´ ëŒ€ìƒì˜ ì˜ì—­ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.    

`Low-pass filter(LPF)`ì™€ `High-pass filter(HPF)`ë¥¼ ì´ìš©í•˜ì—¬, LPFë¥¼ ì ìš©í•˜ë©´ ë…¸ì´ì¦ˆì œê±°ë‚˜ blurì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆìœ¼ë©°, HPFë¥¼ ì ìš©í•˜ë©´ ê²½ê³„ì„ ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  

OpenCVì—ì„œëŠ”Â `cv2.filter2D()`Â í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ ì´ë¯¸ì§€ì— kernel(filter)ë¥¼ ì ìš©í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ Filteringí•  ìˆ˜ ìˆë‹¤. kernelì€ í–‰ë ¬ì„ ì˜ë¯¸í•˜ëŠ”ë° kernelì˜ í¬ê¸°ê°€ í¬ë©´ ì´ë¯¸ì§€ ì „ì²´ê°€ blurì²˜ë¦¬ê°€ ë§ì´ ëœë‹¤. ì¼ë°˜ì ìœ¼ë¡œ 5X5í–‰ë ¬ì„ ì‚¬ìš©í•œë‹¤.  

Filterê°€ ì ìš©ë˜ëŠ” ë°©ë²•ì€ 

1. ì´ë¯¸ì§€ì˜ ê° pixelì— kernelì„ ì ìš©í•œë‹¤.  
2. 5x5 kernelì„ ì˜ˆë¡œë“¤ë©´ ê° pixelì— 5x5ìœˆë„ìš°ë¥¼ ì˜¬ë ¤ ë†“ê³ , ê·¸ ì˜ì—­ì•ˆì— í¬í•¨ë˜ëŠ” ê°’ì˜ Sumì„ í•œ í›„ì— 25ë¡œ ë‚˜ëˆˆë‹¤.
3. ê·¸ ê²°ê³¼ëŠ” í•´ë‹¹ ìœ„ë„ìš° ì˜ì—­ì•ˆì˜ í‰ê· ê°’ì´ë˜ê³ , ê·¸ ê°’ì„ í•´ë‹¹ pixelì— ì ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤.  

![Untitled](images/Untitled%2021.png)

### Image Blurring

Image Blurringì€ low-pass filterë¥¼ ì´ë¯¸ì§€ì— ì ìš©í•˜ì—¬ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³ ì£¼íŒŒì˜ì—­ì„ ì œê±°í•¨ìœ¼ë¡œì¨ ë…¸ì´ì¦ˆë¥¼ ì œê±°í•˜ê±°ë‚˜ ê²½ê³„ì„ ì„ íë¦¬ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. OpenCVì—ëŠ” 4ê°€ì§€ í˜•íƒœì˜ blurring ë°©ë²•ì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.

**Averaging**

Boxí˜•íƒœì˜ kernelì„ ì´ë¯¸ì§€ì— ì ìš©í•œ í›„ í‰ê· ê°’ì„ boxì˜ ì¤‘ì‹¬ì ì— ì ìš©í•˜ëŠ” í˜•íƒœ

![Untitled](images/Untitled%2022.png)

****Gaussian Filtering****

box filterëŠ” ë™ì¼í•œ ê°’ìœ¼ë¡œ êµ¬ì„±ëœ kernelì„ ì‚¬ìš©í•˜ì§€ë§Œ, Gaussian FilterëŠ” Gaussianí•¨ìˆ˜ë¥¼ ì´ìš©í•œ Kernelì„ ì ìš©í•œë‹¤. ì¦‰, kernel í–‰ë ¬ì˜ ê°’ì„ Gaussian í•¨ìˆ˜ë¥¼ í†µí•´ì„œ ìˆ˜í•™ì ìœ¼ë¡œ ìƒì„±í•˜ì—¬ ì ìš©í•œë‹¤.  

![Untitled](images/Untitled%2023.png)

****Median Filtering****

kernel windowì™€ pixelì˜ ê°’ë“¤ì„ ì •ë ¬í•œ í›„ì— ì¤‘ê°„ê°’ì„ ì„ íƒí•˜ì—¬ ì ìš©í•œë‹¤.Â [salt-and-pepper noise](https://ko.wikipedia.org/wiki/%EC%A0%90%EC%9E%A1%EC%9D%8C)Â ì œê±°ì— ê°€ì¥ íš¨ê³¼ì ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´ ì•„ë˜ì™€ ê°™ì´ kernel windowì„ ì ìš©ì‹œí‚¨ ê²°ê³¼ê°€ ë‹¤ìŒê³¼ ê°™ë‹¤ë©´

![Untitled](images/Untitled%2024.png)

í¬ê¸°ìˆœìœ¼ë¡œ ì •ë ¬ì„ í•˜ë©´ 33,54,67,84,102,163,189,212,224 ì´ë‹¤. ì´ì¤‘ì— ì¤‘ê°„ê°’ì¸ 102ê°€ ì¤‘ì•™ê°’ìœ¼ë¡œ ê²°ì •ëœë‹¤.(ì¤‘ì•™ì— ìˆëŠ” 189ê°€ 102ë¡œ ë³€ê²½ë¨.)

![Untitled](images/Untitled%2025.png)

****Bilateral Filtering****

ì§€ê¸ˆê¹Œì§€ì˜ Blurì²˜ë¦¬ëŠ” ê²½ê³„ì„ ê¹Œì§€ Blurì²˜ë¦¬ê°€ ë˜ì–´, ê²½ê³„ì„ ì´ íë ¤ì§€ê²Œ ëœë‹¤. Bilateral Filtering(ì–‘ë°©í–¥ í•„í„°)ì€ ê²½ê³„ì„ ì„ ìœ ì§€í•˜ë©´ì„œ Gaussian Blurì²˜ë¦¬ë¥¼ í•´ì£¼ëŠ” ë°©ë²•ì´ë‹¤.

Gaussian í•„í„°ë¥¼ ì ìš©í•˜ê³ , ë˜ í•˜ë‚˜ì˜ Gaussian í•„í„°ë¥¼ ì£¼ë³€ pixelê¹Œì§€ ê³ ë ¤í•˜ì—¬ ì ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤.

![Untitled](images/Untitled%2026.png)

### ë¸”ëŸ¬ì²˜ë¦¬ ì˜ˆì‹œ

![Untitled](images/Untitled%2027.png)

## ****Morphological Transformations****

`Morphologicla Transformation`ì€ ì´ë¯¸ì§€ë¥¼ Segmentationí•˜ì—¬ ë‹¨ìˆœí™”, ì œê±°, ë³´ì •ì„ í†µí•´ì„œ í˜•íƒœë¥¼ íŒŒì•…í•˜ëŠ” ëª©ì ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤. ì¼ë°˜ì ìœ¼ë¡œ binaryë‚˜ grayscale imageì— ì‚¬ìš©ëœë‹¤. ì‚¬ìš©í•˜ëŠ” ë°©ë²•ìœ¼ë¡œëŠ” `Dilation(íŒ½ì°½)`, `Erosion(ì¹¨ì‹)`, ê·¸ë¦¬ê³  2ê°œë¥¼ ì¡°í•©í•œ `Opening`ê³¼ `Closing`ì´ ìˆìŠµë‹ˆë‹¤.  

### Erosion

ê° Pixelì— structuring elementë¥¼ ì ìš©í•˜ì—¬ í•˜ë‚˜ë¼ë„ 0ì´ ìˆìœ¼ë©´ ëŒ€ìƒ pixelì„ ì œê±°í•˜ëŠ” ë°©ë²•ì´ë‹¤.  

![Untitled](images/Untitled%2028.png)

ìœ„ ê·¸ë¦¼ì—ì„œ ê°€ìš´ë° ìˆëŠ” ì‹­ìí˜• Structuring Elementë¥¼ Original Imageì— ì ìš©ì„ í•œë‹¤. ì›ë³¸ì˜ ê° pixelì— ì ìš©ì„ í•˜ì—¬ ê²¹ì¹˜ëŠ” ë¶€ë¶„ì´ ì—†ëŠ” ë¶€ë¶„ì´ í•˜ë‚˜ë¼ë„ ìˆìœ¼ë©´ ê·¸ ì¤‘ì‹¬ pixelì„ ì œê±°í•˜ëŠ” ë°©ì‹ì´ë‹¤. ìµœì¢…ì ìœ¼ë¡œ ìš°ì¸¡ì˜ ë¶„í™ìƒ‰ ì˜ì—­ë§Œ ë‚¨ê²Œ ë˜ê³ ,Â **ì´ ë°©ë²•ì€ ì‘ì€ Objectë¥¼ ì œê±°í•˜ëŠ” íš¨ê³¼ê°€ ìˆë‹¤**.

![Untitled](images/Untitled%2029.png)

### ****Dilation****

Erosionê³¼ ë°˜ëŒ€ë¡œ ëŒ€ìƒì„ í™•ì¥í•œ í›„ ì‘ì€ êµ¬ë©ì„ ì±„ìš°ëŠ” ë°©ë²•ì´ë‹¤. Erosionê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ê° pixelì— structuring elementë¥¼ ì ìš©í•œë‹¤. ëŒ€ìƒ pixelì— ëŒ€í•´ì„œ OR ì—°ì‚°ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì¦‰ ê²¹ì¹˜ëŠ” ë¶€ë¶„ì´ í•˜ë‚˜ë¼ë„ ìˆìœ¼ë©´ ì´ë¯¸ì§€ë¥¼ í™•ì¥í•œë‹¤.    

![Untitled](images/Untitled%2030.png)

ìœ„ ê·¸ë¦¼ì€ ì‹­ìí˜• structuring elementë¥¼ ì›ë³¸ì´ë¯¸ì§€ì— OR ì—°ì‚°ì„ ì ìš©í•œë‹¤. ìµœì¢…ì ìœ¼ë¡œ í™•ì¥ëœ ì´ë¯¸ì§€ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.Â **ê²°ê³¼ì ìœ¼ë¡œ ê²½ê³„ê°€ ë¶€ë“œëŸ¬ì›Œ ì§€ê³ , êµ¬ë©ì´ ë©”ê¿”ì§€ëŠ” íš¨ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.**

![Untitled](images/Untitled%2031.png)

### ****Opening & Closing****

Openingê³¼ Closingì€ Erosionê³¼ Dilationì˜ ì¡°í•© ê²°ê³¼ ì…ë‹ˆë‹¤. ì°¨ì´ëŠ” ì–´ëŠ ê²ƒì„ ë¨¼ì € ì ìš©ì„ í•˜ëŠ” ì°¨ì´ ì…ë‹ˆë‹¤.

- Opeing : Erosionì ìš© í›„ Dilation ì ìš©. ì‘ì€ Objectë‚˜ ëŒê¸° ì œê±°ì— ì í•©
- Closing : Dilationì ìš© í›„ Erosion ì ìš©. ì „ì²´ì ì¸ ìœ¤ê³½ íŒŒì•…ì— ì í•©

![Untitled](images/Untitled%2032.png)

Morphological ë³€í™˜ ì˜ˆì œ

![Untitled](images/Untitled%2033.png)

## ****Image Gradients****

Gradient(ê¸°ìš¸ê¸°)ëŠ” ìŠ¤ì¹¼ë¼ì¥(ì¦‰, ê³µê°„)ì—ì„œ ìµœëŒ€ì˜ ì¦ê°€ìœ¨ì„ ë‚˜íƒ€ë‚´ëŠ” ë²¡í„°ì¥(ë°©í–¥ê³¼ í˜)ì„ ëœ»í•œë‹¤.  

ì˜ìƒì²˜ë¦¬ì—ì„œ gradientëŠ” ì˜ìƒì˜ edge ë° ê·¸ ë°©í–¥ì„ ì°¾ëŠ” ìš©ë„ë¡œ í™œìš©ë˜ëŠ”ë°,  ì´ë¯¸ì§€ (x,y)ì—ì„œì˜ ë²¡í„°ê°’(í¬ê¸°ì™€ ë°©í–¥, ì¦‰ ë°ê¸°ì™€ ë°ê¸°ì˜ ë³€í™”í•˜ëŠ” ë°©í–¥)ì„ êµ¬í•´ì„œ í•´ë‹¹ pixelì´ edgeì— ì–¼ë§ˆë‚˜ ê°€ê¹Œìš´ì§€, ê·¸ë¦¬ê³  ê·¸ ë°©í–¥ì´ ì–´ë””ì¸ì§€ ì‰½ê²Œ ì•Œìˆ˜ ìˆê²Œ í•œë‹¤.

### ****Sobel & Scharr Filter****

Gaussian smoothingê³¼ ë¯¸ë¶„ì„ ì´ìš©í•œ ë°©ë²•ì´ë‹¤. ê·¸ë˜ì„œ ë…¸ì´ì¦ˆê°€ ìˆëŠ” ì´ì§€ë¯¸ì— ì ìš©í•˜ë©´ ì¢‹ë‹¤. Xì¶•ê³¼ Yì¶•ì„ ë¯¸ë¶„í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ê²½ê³„ê°’ì„ ê³„ì‚°í•œë‹¤.  

ì§ì„ ì„ ë¯¸ë¶„í•˜ë©´ ìƒìˆ˜, ê³¡ì„ ì„ ë¯¸ë¶„í•˜ë©´ ë˜ ë‹¤ë¥¸ ë°©ì •ì‹ì´ ë‚˜ì˜¤ëŠ” ì„±ì§ˆì„ ì´ìš©í•˜ì—¬ edgeì— ëŒ€í•œ ì„ ì„ ê·¸ë ¤ì£¼ëŠ” ê¸°ëŠ¥ì„ í•œë‹¤.  ë˜í•œ ë¯¸ë¶„ì‹œ ì†Œì‹¤ë˜ëŠ” í‘œë³¸ì˜ ì •ë³´ê°€ ë§ì„ ìˆ˜ ìˆì–´ `aperture_size`ê°’ì„ ì´ìš©í•˜ì—¬ ì†Œì‹¤ë˜ëŠ” ì •ë„ë¥¼ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤.  

cv2.Sobel í•¨ìˆ˜ì—ì„œ ksizeê°€ -1ì´ë©´ 3x3 Scharr filterê°€ ì ìš©ì´ ë˜ì–´ Sobelì˜ 3x3ë³´ë‹¤ ì¢€ ë” ë‚˜ì€ ê²°ê³¼ë¥¼ ë³´ì—¬ ì¤€ë‹¤. 

![Untitled](images/Untitled%2034.png)

### Laplacian í•¨ìˆ˜

ì´ë¯¸ì§€ì˜ ê°€ë¡œì™€ ì„¸ë¡œì— ëŒ€í•œ Gradientë¥¼ 2ì°¨ ë¯¸ë¶„í•œ ê°’ì´ë‹¤. Sobel filterì— ë¯¸ë¶„ì˜ ì •ë„ê°€ ë”í•´ì§„ ê²ƒê³¼ ë¹„ìŠ·í•˜ë‹¤.  

![Untitled](images/Untitled%2035.png)

### Canny Edge Detection

ê°€ì¥ ìœ ëª…í•œ Edge Detectionë°©ë²•ì´ë‹¤. ì—¬ëŸ¬ ë‹¨ê³„ì˜ Algorithmì„ í†µí•´ì„œ ê²½ê³„ë¥¼ ì°¾ì•„ ë‚¸ë‹¤.  

1. **Noise Reduction**
    - ì´ë¯¸ì§€ì˜ Noiseë¥¼ ì œê±°í•œë‹¤. ì´ë•Œ 5x5ì˜ Gaussian filterë¥¼ ì´ìš©í•©ë‹ˆë‹¤.
2. Edge Gradient Detection
    - ì´ë¯¸ì§€ì—ì„œ Gradientì˜ ë°©í–¥ê³¼ ê°•ë„ë¥¼ í™•ì¸í•œë‹¤. ê²½ê³„ê°’ì—ì„œëŠ” ì£¼ë³€ê³¼ ìƒ‰ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ë¯¸ë¶„ê°’ì´ ê¸‰ì†ë„ë¡œ ë³€í•˜ê²Œ ëœë‹¤. ì´ë¥¼ í†µí•´ ê²½ê³„ê°’ í›„ë³´êµ°ì„ ì„ ë³„í•œë‹¤.
3. Non-maximum Suppression
    - ì´ë¯¸ì§€ì˜ pixelì„ Full scaní•˜ì—¬ Edgeê°€ ì•„ë‹Œ pixelì€ ì œê±°í•œë‹¤.
4. Hysteresis Thresholding
    - ì´ì œ ì§€ê¸ˆê¹Œì§€ Edgeë¡œ íŒë‹¨ëœ pixelì´ ì§„ì§œ edgeì¸ì§€ íŒë³„í•˜ëŠ” ì‘ì—…ì„ í•œë‹¤. max valê³¼ minVal(ì„ê³„ê°’)ì„ ì„¤ì •í•˜ì—¬ maxVal ì´ìƒì€ ê°•í•œ Edge, minê³¼ maxì‚¬ì´ëŠ” ì•½í•œ edgeë¡œ ì„¤ì •í•œë‹¤. ì´ì œ ì•½í•œ edgeê°€ ì§„ì§œ edgeì¸ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ ê°•í•œ edgeì™€ ì—°ê²°ì´ ë˜ì–´ ìˆìœ¼ë©´ edgeë¡œ íŒë‹¨í•˜ê³ , ê·¸ëŸ¬ì§€ ì•Šìœ¼ë©´ ì œê±°í•œë‹¤.

![Untitled](images/Untitled%2036.png)

### edge detection ì˜ˆì œ

![Untitled](images/Untitled%2037.png)

## Image Pyramids

ì¼ë°˜ì ìœ¼ë¡œëŠ” ê³ ì •ëœ ì´ë¯¸ì§€ ì‚¬ì´ì¦ˆë¥¼ ì‘ì—…ì„ í•˜ì§€ë§Œ, ë•Œë•Œë¡œ ë™ì¼í•œ ì´ë¯¸ì§€ì— ëŒ€í•´ì„œ ë‹¤ì–‘í•œ ì‚¬ì´ì¦ˆë¥¼ ê°€ì§€ê³  ì‘ì—…ì„ í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ë§Œì¼, ì´ë¯¸ì§€ì—ì„œ ì–¼êµ´ì„ ì°¾ì„ ê²½ìš°ì— ì–¼êµ´ì˜ ì‚¬ì´ì¦ˆë¥¼ í™•ì‹ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ëŸ´ ê²½ìš°ì—ëŠ” ì›ë³¸ ì´ë¯¸ì§€ì— ëŒ€í•œ ë‹¤ì–‘í•œ ì‚¬ì´ì¦ˆì—ì„œ ì–¼êµ´ì„ ì°¾ëŠ”ë‹¤ë©´ ì¢€ë” ì •í™•í•˜ê³  í™•ì‹¤í•œ ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì²˜ëŸ¼ ë™ì¼ ì´ë¯¸ì§€ì˜ ì„œë¡œ ë‹¤ë¥¸ ì‚¬ì´ì¦ˆì˜ setì„ Image Pyramidsë¼ê³  í•©ë‹ˆë‹¤

Image Pyramidì˜ ì¢…ë¥˜ëŠ” 1) Gaussian Pyramids ì™€ 2) Laplacian Pyramids ê°€ ìˆìŠµë‹ˆë‹¤.

Gaussian Pyramidì˜ High Level(ë‚®ì€ í•´ìƒë„. Pyramidì˜ ìƒë‹¨)ì€ Lower levelì—ì„œ rowì™€ columnì„ ì—°ì†ì ìœ¼ë¡œ ì œê±°í•˜ë©´ì„œ ìƒì„±ë©ë‹ˆë‹¤. M x N ì‚¬ì´ì§€ì˜ ì´ë¯¸ì§€ëŠ” M/2 X N/2 ê°€ ì ìš©ë˜ì—° 1/4ì‚¬ì´ì¦ˆë¡œ ì¤„ì–´ë“¤ê²Œ ë©ë‹ˆë‹¤.

ì´ë¯¸ì§€ Pyramidë¥¼ ì´ìš©í•˜ë©´ ì´ë¯¸ì§€ ê²°í•©ì„ ìì—°ìŠ¤ëŸ½ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‘ì—… ìˆœì„œëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

1. 2ê°œì˜ ì´ë¯¸ì§€ë¥¼ ê°ê° Loadí•¨.
2. ê° ì´ë¯¸ì§€ì— ëŒ€í•´ì„œ ì ë‹¹í•œ Gaussian Pyramidë¥¼ ìƒì„±í•¨.Gaussian Pyramidë¥¼ ì´ìš©í•˜ì—¬ Laplacian Pyramidë¥¼ ìƒì„±í•¨.
3. ê° ë‹¨ê³„ì˜ Laplicain Pyramidë¥¼ ì´ìš©í•˜ì—¬ ê° ì´ë¯¸ì§€ì˜ ì¢Œì¸¡ê³¼ ìš°ì¸¡ì„ ê²°í•¨.
4. ê²°í•¨í•œ ê²°ê³¼ì¤‘ ê°€ì¥ ì‘ì€ ì´ë¯¸ì§€ë¥¼ í™•ëŒ€í•˜ë©´ì„œ ë™ì¼ ì‚¬ì´ì¦ˆì˜ ê²°í•©ê²°ê³¼ì™€ Addí•˜ì—¬ ì™¸ê³½ì„ ì„ ì„ ëª…í•˜ê²Œ ì²˜ë¦¬í•¨.

ìœ„ ì‘ì—…ë‹¨ê³„ ìˆœì„œëŒ€ë¡œ 2ê°œì˜ ì´ë¯¸ì§€ë¥¼ ê²°í•©í•œ ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 

![Untitled](images/Untitled%2038.png)

![Untitled](images/Untitled%2039.png)

## Image Contours

### Contours

Contoursë€ ë™ì¼í•œ ìƒ‰ ë˜ëŠ” ë™ì¼í•œ ê°•ë„ë¥¼ ê°€ì§€ê³  ìˆëŠ” ì˜ì—­ì˜ ê²½ê³„ì„ ì„ ì—°ê²°í•œ ì„ ì´ë‹¤.  

ëŒ€ìƒì˜ ì™¸í˜•ì„ íŒŒì•…í•˜ëŠ”ë° ìœ ìš©í•˜ê²Œ ì‚¬ìš© ëœë‹¤.  

- ì •í™•ë„ë¥¼ ë†’ì´ê¸° ìœ„í•´ì„œ Binary Imageë¥¼ ì‚¬ìš©í•œë‹¤. thresholdë‚˜ canny edgeë¥¼ ì„ ì²˜ë¦¬ë¡œ ìˆ˜í–‰í•œë‹¤.
- `cv2.findContours()` í•¨ìˆ˜ëŠ” ì›ë³¸ ì´ë¯¸ì§€ë¥¼ ì§ì ‘ ìˆ˜ì •í•˜ê¸° ë•Œë¬¸ì—, ì›ë³¸ ì´ë¯¸ì§€ë¥¼ ë³´ì¡´ í•˜ë ¤ë©´ Copyí•´ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

### Find & Draw Contours

OpenCVì—ì„œ contoursë¥¼ ì°¾ê³ , ê·¸ë¦¬ê¸° ìœ„í•´ì„œ ì•„ë˜ 2ê°œì˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.  

![Untitled](images/Untitled%2040.png)

Methodì— ëŒ€í•´ì„œ ì„¤ëª…ì„ í•˜ë©´ ì•„ë˜ ì˜ˆì œì˜ ê²°ê³¼ì—ì„œ ì²˜ëŸ¼ ì‚¬ê°í˜•ì˜ contours lineì„ ê·¸ë¦´ ë•Œ,Â `cv2.CHAIN_APPROX_NONE`Â ëŠ” ëª¨ë“  pointë¥¼ ì €ì¥í•˜ê³ Â `cv2.CHAIN_APPROX_SIMPLE`
ëŠ” 4ê°œì˜ pointë§Œì„ ì €ì¥í•˜ì—¬ ë©”ëª¨ë¦¬ë¥¼ ì ˆì•½í•œë‹¤.  

![Untitled](images/Untitled%2041.png)

## Contour Feature

### Moments

Image MomentëŠ” ëŒ€ìƒì„ êµ¬ë¶„í•  ìˆ˜ ìˆëŠ” íŠ¹ì§•ì„ ì˜ë¯¸í•œë‹¤. íŠ¹ì§•ìœ¼ë¡œëŠ” Area, Perimeter, ì¤‘ì‹¬ì  ë“±ì´ ìˆë‹¤. Image MomentsëŠ” ëŒ€ìƒì„ êµ¬ë¶„í•œ í›„, ë‹¤ë¥¸ ëŒ€ìƒê³¼ êµ¬ë¶„í•˜ê¸° ìœ„í•´ ëŒ€ìƒì„ ì„¤ëª…í•˜ëŠ” ìë£Œë¡œ ì‚¬ìš©ëœë‹¤.  

```jsx
image, contours, hierachy = cv2.findContours(thresh, cv2.RETR_TREE,cv2.CHAIN_APPROX_SIMPLE)

# ì²«ë²ˆì§¸ contoursì˜ moment íŠ¹ì§• ì¶”ì¶œ
cnt = contours[0]
M = cv2.moments(cnt)
```

### Contour Area

Contourë©´ì ì€ momentsì˜ `m00` ê°’ì´ê±°ë‚˜ `cv2.contourArea()` í•¨ìˆ˜ë¡œ êµ¬í•  ìˆ˜ ìˆë‹¤.  

```jsx
>>> cv2.contourArea(cnt)
30464.0
```

### Countour Perimeter

Contourì˜ ë‘˜ë ˆ ê¸¸ì´ë¥¼ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‚¬ê°í˜•ì˜ ê²½ìš°ëŠ” ë‘˜ë ˆê¸¸ì´ì˜ í•©ì´ë‹¤. ì•„ë˜ í•¨ìˆ˜ì˜ 2ë²ˆì§¸ argumentê°€ trueì´ë©´ íê³¡ì„  ë„í˜•ì„ ë§Œë“¤ì–´ ë‘˜ë ˆê¸¸ì´ë¥¼ êµ¬í•˜ê³ , Falseì´ë©´ ì‹œì‘ì ê³¼ ëì ì„ ì—°ê²°í•˜ì§€ ì•Šê³  ë‘˜ë ˆ ê¸¸ì´ë¥¼ êµ¬í•œë‹¤.  

```jsx
>>> cv2.arcLength(cnt, True)
750.0
>>> cv2.arcLength(cnt, False)
494.0
```

### Contour Approximation

`cv2.findContours()`Â í•¨ìˆ˜ì— ì˜í•´ì„œ ì°¾ì€ contours lineì€ ê°ê°ì˜ contours pointë¥¼ ê°€ì§€ê³  ìˆë‹¤.  

ì´ Pointë¥¼ ì—°ê²°í•˜ì—¬ Lineì„ ê·¸ë¦¬ê²Œ ë©ë‹ˆë‹¤. ì´ë•Œ ì´ pointì˜ ìˆ˜ë¥¼ ì¤„ì—¬ ê·¼ì‚¬í•œ lineì„ ê·¸ë¦´ ë•Œ ì‚¬ìš©ë˜ëŠ” ë°©ë²•ì´ë‹¤.  

ê·¼ì‚¬ì¹˜ë¥¼ ì°¾ëŠ”ë° ì‚¬ìš©ë˜ëŠ” í•¨ìˆ˜ëŠ” `cv2.approxPolyDP()` ì´ë‹¤. 

![Untitled](images/Untitled%2042.png)

### ****Convex Hull****

Convex Hullì´ë€ contours pointë¥¼ ëª¨ë‘ í¬í•¨í•˜ëŠ” ë³¼ë¡í•œ ì™¸ê´€ì„ ì„ ì˜ë¯¸í•œë‹¤. 

Contour Approximationê³¼ ìœ ì‚¬í•œ ê²°ê³¼ì§€ë§Œ, ë°©ë²•ì€ ì „í˜€ ë‹¤ë¥´ë‹¤.

ì•„ë˜ ê·¸ë¦¼ì—ì„œ ë¶‰ì€ ì„ ì´ Convex Hullì„ ë‚˜íƒ€ë‚´ê³  í™”ì‚´í‘œì˜ ì°¨ì´ê°€ convexity defectë¼ê³  í•œë‹¤. 

convexity defectëŠ” contoursì™€ hullê³¼ì˜ ìµœëŒ€ì°¨ì´ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.  

![Untitled](images/Untitled%2043.png)

## Contour Property

### Aspect Ratio

Contours Lineì˜ ê°€ë¡œ ì„¸ë¡œ ë¹„ìœ¨ ì†ì„±ì´ë‹¤.  

![Untitled](images/Untitled%2044.png)

 `cv2.boundingRect()` í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ ê°€ë¡œ/ì„¸ë¡œ í¬ê¸°ë¥¼ êµ¬í•œ í›„ì— ì‚¬ìš©í•œë‹¤.

```jsx
x, y, w, h = cv2.boundingRect(cnt)
aspect_ratio = float(w)/h
```

### Extend

Contour Lineë¥¼ í¬í•¨í•˜ëŠ” ì‚¬ê°í˜• ë©´ì ëŒ€ë¹„ Contourì˜ ë©´ì  ë¹„ìœ¨ì´ë‹¤.  

![Untitled](images/Untitled%2045.png)

```jsx
area = cv2.contourArea(cnt) # Contour Lineì˜ ë©´ì 
x, y, w, h = cv2.boundingRect(cnt)
rect_area = w * h  # ì‚¬ê°í˜• ë©´ì 
extend = float(area) / rect_area
```

### Solidity

Solidity Ratio(ê³ í˜•ë¹„)ëŠ” Convex hullë©´ì  ëŒ€ë¹„ Contourì˜ ë©´ì  ë¹„ìœ¨ì´ë‹¤.  

![Untitled](images/Untitled%2046.png)

```jsx
area = cv2.contourArea(cnt) # Contour Lineë©´ì 
hull = cv2.convexHull(cnt) # Convex hull line
hull_area = cv2.contourArea(hull) # Convex hull ë©´ì 
solidity = float(area) / hull_area
```

### Extream Points

Contour Lineì˜ ì¢Œìš°ìƒí•˜ì˜ ëì ì„ ì°¾ëŠ” ë°©ë²•ì´ë‹¤. 

```jsx
leftmost = tuple(cnt[cnt[:,:,0].argmin()][0])
rightmost = tuple(cnt[cnt[:,:,0].argmax()][0])
topmost = tuple(cnt[cnt[:,:,1].argmin()][0])
bottommost = tuple(cnt[cnt[:,:,1].argmax()][0])
```

cntëŠ” contour pointê°€ í¬í•¨ëœ arrayì´ë‹¤. ì—¬ê¸°ì„œÂ `cnt[:,:,0]`Â ì˜ ì˜ë¯¸ëŠ” pointì˜ x ì¢Œí‘œ ê°’ë§Œ í¬í•¨í•˜ëŠ” ë°°ì—´ì´ ëœë‹¤. ì—¬ê¸°ì—Â `argmin()`Â ì„ ì ìš©í•˜ë©´ xì¢Œí‘œê°€ ê°€ì¥ ì‘ì€ arrayì˜ ìœ„ì¹˜ê°€ ë‚˜ì˜¤ê²Œ ëœë‹¤. ê·¸ ìœ„ì¹˜ë¥¼ ë‹¤ì‹œ cntì—ì„œ ì°¾ìœ¼ë©´ ê°€ì¥ ì™¼ìª½ì— ìˆëŠ” ì¢Œí‘œë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤. ë‚˜ë¨¸ì§€ë„ ë™ì¼í•œ ë°©ë²•ìœ¼ë¡œ ì¢Œìš°ìƒí•˜ì˜ ëì ì„ ì°¾ì„ ìˆ˜ ìˆë‹¤.

## Contours Hierarchy

Imageì—ëŠ” ì—¬ëŸ¬ê°œì˜ Contoursê°€ ì¡´ì¬í•˜ê³ , ê·¸ì‚¬ì´ì—ëŠ” ì„œë¡œ í¬í•¨í•˜ëŠ” ê´€ê³„ê°€ ì¡´ì¬í•œë‹¤.  ê·¸ ê´€ê³„ë¥¼ Contours Hierarchyë¼ê³  í•œë‹¤. ì´ì „, ì´í›„, Parent, child ê´€ê³„ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆë‹¤.  

ì´ëŸ° ê´€ê³„ë¥¼ íŒŒì•…í•˜ê¸° ìœ„í•´ì„œëŠ” `cv2.findContours()` ì— Contour Retrieval Modelê°’ì— ì˜í•´ì„œ ê²°ì •ì´ ëœë‹¤.  

### Hierarchy

ì•„ë˜ ì›ë³¸ ì´ë¯¸ì§€ì— ëŒ€í•´ì„œ Contour Lineì„ ì ìš©í•œ ê²°ê³¼ ì´ë‹¤.  



![Untitled](images/Untitled%2047.png)

ìœ„ ê²°ê³¼ëŠ” ì´ 9ê°œì˜ contour lineìœ¼ë¡œ êµ¬ì„±ì´ ë˜ì–´ ìˆë‹¤. ì£¼ì˜í•´ì„œ ë´ì•¼í•  ë¶€ë¶„ì€ 3,3a ì™€ 4,4aì´ë‹¤.  

Hirerarchy êµ¬ì„±ì‹œ childì˜ childê°€ ìˆì„ ê²½ìš° ë°”ê¹¥ì„ ê³¼ ì•ˆìª½ì„ ì´ ì„œë¡œ ë¶„ë¦¬ê°€ ë˜ì–´ contour lineì„ êµ¬ì„±í•œë‹¤. ì´ëŠ” í¬í•¨ ê´€ê³„ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•´ì„œ ì´ë‹¤. 

ë‹¤ìŒìœ¼ë¡œ contour retrival modeì— ë”°ë¼ì„œ hirerarchyê°’ì´ ì–´ë–»ê²Œ í‘œí˜„ë˜ëŠ”ì§€ ì•Œì•„ ë³´ì.

### RETR_LIST

hierarchyì˜ shapeëŠ” (1, x, 4)ì˜ í˜•íƒœì´ë‹¤. ì—¬ê¸°ì„œ 3ë²ˆì§¸ ì°¨ì›ì˜ 4ê°œì˜ ê°’ì´ hierarchyë¥¼ í‘œí˜„í•œë‹¤.  

ê° ê°’ì˜ ì˜ë¯¸ëŠ” (next, prev, child, parent) ì…ë‹ˆë‹¤. RETR_LISTëŠ” ì„ /í›„ ê´€ê³„ë§Œì„ í‘œí˜„í•˜ê³ , parent/childê´€ê³„ë¥¼ í‘œí˜„í•˜ì§€ ì•ŠëŠ” modeì…ë‹ˆë‹¤. ë¨¼ì € ìœ„ ì˜ˆì œì—ì„œ modeë¥¼Â `cv2.RETR_LIST`
Â ë¡œ í•œ ê²°ê³¼ë¥¼ í™•ì¸í•´ ë³´ì.

```jsx
>>> hierarchy
array([[[ 1, -1, -1, -1],
        [ 2,  0, -1, -1],
        [ 3,  1, -1, -1],
        [ 4,  2, -1, -1],
        [ 5,  3, -1, -1],
        [ 6,  4, -1, -1],
        [ 7,  5, -1, -1],
        [ 8,  6, -1, -1],
        [-1,  7, -1, -1]]])
```

modeì˜ íŠ¹ì„±ëŒ€ë¡œ nextì™€ prevëŠ” ê°’ì´ ìˆì§€ë§Œ, childì™€ parentëŠ” ëª¨ë‘ -1ì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë³´ë©´ Hierarchyë¥¼ êµ¬í•  í•„ìš”ê°€ ì—†ì„ ë•Œ ì‚¬ìš©í•˜ë©´ ì¢‹ë‹¤.  

### RETR_EXTERNAL

ì´ modeëŠ” ê°€ì¥ ë°”ê¹¥ìª½(ë‹¤ë¥¸ Contours Lineì— í¬í•¨ë˜ì§€ ì•ŠëŠ”)ì— ìˆëŠ” contourë§Œì„ returní•œë‹¤. ìœ„ ì˜ˆì—ì„œëŠ” 1,2,3ë²ˆ lineì´ë‹¤.(parent/childëŠ” êµ¬ì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.)

```jsx
>>> hierarchy
array([[[ 1, -1, -1, -1],
        [ 2,  0, -1, -1],
        [-1,  1, -1, -1]]])
```

### RETR_CCOMP

ì´ modeëŠ” Hierarchyë¥¼ 2-Levelë¡œ í‘œí˜„í•©ë‹ˆë‹¤. ë°”ê¹¥ìª½(ì™¸ê³½ì„ )ì€ ëª¨ë‘ 1-Level, ì•ˆì— í¬í•¨ëœ ê²ƒì€ 2-Levelì´ ë©ë‹ˆë‹¤.

![Untitled](images/Untitled%2048.png)

ìœ„ ê·¸ë¦¼ì„ ë³´ë©´ ê´„í˜¸ ë°– ìˆ«ìëŠ” contoursì˜ ìˆœì„œì´ê³  ê´„í˜¸ ì•ˆ ìˆ«ìëŠ” hierachyë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. ì´ì „ê³¼ ë‹¤ë¥¸ ì ì€ ê°€ì¥ ì•ˆìª½ì—ì„œ ë¶€í„° contourì˜ ìˆœì„œë¥¼ ë¶€ì—¬í•˜ê²Œ ëœë‹¤.  

ë¨¼ì € contour-0ì€ 2ê°œì˜ contourë¥¼ í¬í•¨í•˜ê¸° ë•Œë¬¸ì— hierarchy-1ì…ë‹ˆë‹¤. ë™ì¼ levelì˜ nextëŠ” 3ì´ê³ , previousëŠ” ì—†ë‹¤.  childëŠ” contour-1ì´ê³ , parentëŠ” ì—†ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ê²°ê³¼ì ìœ¼ë¡œ [3,-1,1,-1]ì˜ ê°’ì„ ê°–ê²Œ ë©ë‹ˆë‹¤.

contour-1ì€ contour-0ì— í¬í•¨ì´ ë˜ê¸° ë•Œë¬¸ì— hierachy-2ê°€ ëœë‹¤. ë™ì¼ levelì˜ nextëŠ” contour-2ê°€ ë˜ê³ , previousì™€ childëŠ” ì—†ìœ¼ë©°, parentëŠ” contour-0ì…ë‹ˆë‹¤. ê·¸ë˜ì„œ [2,-1,-1,0]ì˜ ê°’ì„ ê°–ê²Œ ë©ë‹ˆë‹¤.

### RETR_TREE

ì´ modeëŠ” Hierarchyë¥¼ ì™„ì „í•˜ê²Œ í‘œí˜„í•œë‹¤. ì¦‰ ëˆ„êµ¬ì—ê²Œë„ í¬í•¨ë˜ì§€ ì•Šì€ contourëŠ” hierarchy-0ì´ ë˜ê³ , ê·¸ ì•ˆìª½ìœ¼ë¡œ í¬í•œë˜ëŠ” contoursëŠ” ìˆœì„œëŒ€ë¡œ hierachyë¥¼ ë¶€ì—¬ ë°›ëŠ”ë‹¤.  

![Untitled](images/Untitled%2049.png)

contour-0ì€ nextëŠ” contour-7, previousëŠ” ì—†ìœ¼ë©°, childëŠ” contour-1, parentëŠ” ì—†ë‹¤. ê²°ê³¼ëŠ” [7,-1,1,-1] ì…ë‹ˆë‹¤. contour-1ì€ nextëŠ” ì—†ê³ , previousë„ ì—†ê³ , childëŠ” contour-2, parentëŠ” contour-0ì´ë‹¤. ê²°ê³¼ëŠ” [-1,-1,2,0] ì…ë‹ˆë‹¤.

```jsx
>>> hierarchy
array([[[ 7, -1,  1, -1],
        [-1, -1,  2,  0],
        [-1, -1,  3,  1],
        [-1, -1,  4,  2],
        [-1, -1,  5,  3],
        [ 6, -1, -1,  4],
        [-1,  5, -1,  4],
        [ 8,  0, -1, -1],
        [-1,  7, -1, -1]]])
```