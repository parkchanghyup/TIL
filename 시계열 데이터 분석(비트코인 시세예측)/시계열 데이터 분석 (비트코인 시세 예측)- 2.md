# 예측 : 파이썬 라이브러리를 활용해 시세 예측
---
 첫번째 방법 : `ARIMA` 
 `ARIMA` : 전통적인 시계열 예측 방법으로 크게 두 가지 개념을 포함. 첫번째는 AR모델로 자기 자신의 과거를 정보로 사용하는 개념.  
 이는 **현재의 상태는 과거의 상태를 참고해서 계산된다**라는 아이디어를 전제로한다.     
 두번째 개념은 MA모델로 **이전 항에서의 오차를 이용하여 현재 항의 상태를 추론하겠다.** 라는 방법.  
 이 둘을 합친 것을 ARMA 모델이라 하며, 조금더 나아간 ARIMA 모델은 ARMA 모델에 추세 변동의 경향성 까지 반영한 방법.
 

파이썬에서는 STATSMODEL 모듈로 ARIMA 분석을 수행한다.   
ARIMA 클래스에 order=(2, 1, 2) 라고 입력되어진 파라미터는 'AR이 몇전 째 과거까지를 바라보는지에 대한 파라미터(2) , 차분에 대한 파라미터(1) , MA가 몇 번째 과거까지를 바라보는지에 대한 파라미터(2)' 를 의미한다.

차분이란 현재 상태의 변수에서 바로 전 상태의 변수를 빼는 것을 의미하며, 시게열 데이터의 불규칙성을 조금이나마 보정해주는 역할을 한다. 또한 앞서 말한 ARIMA 모델의 경향성을 의미한다.

실행 결과의 표를 살펴보면 상수항을 제외한 모든 계수의 p-value가 0.05 이하로 유의미한 것으로 나타난다. 이것은 AR과 MA 모두 2로 설정하는 것이 꽤나 의미 있는 분석 결과를 도출 한다는 것이다.


```python
from statsmodels.tsa.arima_model import ARIMA
import statsmodels.api as sm

# (AR = 2, 차분 = 1, MA = 2 ) 파라미터로 ARIMA 모델 학습
model = ARIMA(bitcoin_df.price.values, order=(2,1,2))
model_fit  = model.fit(trend= 'c', full_output=True, disp=True)
print(model_fit.summary())            
```

                                 ARIMA Model Results                              
    ==============================================================================
    Dep. Variable:                    D.y   No. Observations:                  364
    Model:                 ARIMA(2, 1, 2)   Log Likelihood               -2787.553
    Method:                       css-mle   S.D. of innovations            512.415
    Date:                Wed, 14 Oct 2020   AIC                           5587.107
    Time:                        11:01:44   BIC                           5610.490
    Sample:                             1   HQIC                          5596.400
                                                                                  
    ==============================================================================
                     coef    std err          z      P>|z|      [0.025      0.975]
    ------------------------------------------------------------------------------
    const          6.3634     27.794      0.229      0.819     -48.112      60.839
    ar.L1.D.y     -0.3786      1.824     -0.208      0.836      -3.953       3.195
    ar.L2.D.y      0.1587      1.189      0.134      0.894      -2.171       2.488
    ma.L1.D.y      0.4567      1.819      0.251      0.802      -3.109       4.022
    ma.L2.D.y     -0.1943      1.335     -0.146      0.884      -2.811       2.423
                                        Roots                                    
    =============================================================================
                      Real          Imaginary           Modulus         Frequency
    -----------------------------------------------------------------------------
    AR.1           -1.5864           +0.0000j            1.5864            0.5000
    AR.2            3.9718           +0.0000j            3.9718            0.0000
    MA.1           -1.3797           +0.0000j            1.3797            0.5000
    MA.2            3.7302           +0.0000j            3.7302            0.0000
    -----------------------------------------------------------------------------
    
